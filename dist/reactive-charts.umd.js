(function(pt,J){typeof exports=="object"&&typeof module<"u"?J(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],J):(pt=typeof globalThis<"u"?globalThis:pt||self,J(pt.ReactiveCharts={},pt.React,pt.ReactDOM))})(this,(function(pt,J,fe){"use strict";var he={exports:{}},Ut={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _n;function Hr(){if(_n)return Ut;_n=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Ut.Fragment=e,Ut.jsx=n,Ut.jsxs=n,Ut}var Wt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn;function Or(){return bn||(bn=1,process.env.NODE_ENV!=="production"&&(function(){function t(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===v?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case M:return"Fragment";case R:return"Profiler";case z:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList";case V:return"Activity"}if(typeof g=="object")switch(typeof g.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),g.$$typeof){case b:return"Portal";case x:return g.displayName||"Context";case E:return(g._context.displayName||"Context")+".Consumer";case A:var D=g.render;return g=g.displayName,g||(g=D.displayName||D.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case U:return D=g.displayName||null,D!==null?D:t(g.type)||"Memo";case Q:D=g._payload,g=g._init;try{return t(g(D))}catch{}}return null}function e(g){return""+g}function n(g){try{e(g);var D=!1}catch{D=!0}if(D){D=console;var W=D.error,I=typeof Symbol=="function"&&Symbol.toStringTag&&g[Symbol.toStringTag]||g.constructor.name||"Object";return W.call(D,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",I),e(g)}}function r(g){if(g===M)return"<>";if(typeof g=="object"&&g!==null&&g.$$typeof===Q)return"<...>";try{var D=t(g);return D?"<"+D+">":"<...>"}catch{return"<...>"}}function i(){var g=w.A;return g===null?null:g.getOwner()}function a(){return Error("react-stack-top-frame")}function o(g){if(y.call(g,"key")){var D=Object.getOwnPropertyDescriptor(g,"key").get;if(D&&D.isReactWarning)return!1}return g.key!==void 0}function s(g,D){function W(){k||(k=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",D))}W.isReactWarning=!0,Object.defineProperty(g,"key",{get:W,configurable:!0})}function u(){var g=t(this.type);return N[g]||(N[g]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),g=this.props.ref,g!==void 0?g:null}function l(g,D,W,I,ot,it){var G=W.ref;return g={$$typeof:m,type:g,key:D,props:W,_owner:I},(G!==void 0?G:null)!==null?Object.defineProperty(g,"ref",{enumerable:!1,get:u}):Object.defineProperty(g,"ref",{enumerable:!1,value:null}),g._store={},Object.defineProperty(g._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(g,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(g,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ot}),Object.defineProperty(g,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:it}),Object.freeze&&(Object.freeze(g.props),Object.freeze(g)),g}function c(g,D,W,I,ot,it){var G=D.children;if(G!==void 0)if(I)if(O(G)){for(I=0;I<G.length;I++)f(G[I]);Object.freeze&&Object.freeze(G)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(G);if(y.call(D,"key")){G=t(g);var nt=Object.keys(D).filter(function(S){return S!=="key"});I=0<nt.length?"{key: someKey, "+nt.join(": ..., ")+": ...}":"{key: someKey}",at[G+I]||(nt=0<nt.length?"{"+nt.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,I,G,nt,G),at[G+I]=!0)}if(G=null,W!==void 0&&(n(W),G=""+W),o(D)&&(n(D.key),G=""+D.key),"key"in D){W={};for(var ht in D)ht!=="key"&&(W[ht]=D[ht])}else W=D;return G&&s(W,typeof g=="function"?g.displayName||g.name||"Unknown":g),l(g,G,W,i(),ot,it)}function f(g){h(g)?g._store&&(g._store.validated=1):typeof g=="object"&&g!==null&&g.$$typeof===Q&&(g._payload.status==="fulfilled"?h(g._payload.value)&&g._payload.value._store&&(g._payload.value._store.validated=1):g._store&&(g._store.validated=1))}function h(g){return typeof g=="object"&&g!==null&&g.$$typeof===m}var d=J,m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),x=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),v=Symbol.for("react.client.reference"),w=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,y=Object.prototype.hasOwnProperty,O=Array.isArray,B=console.createTask?console.createTask:function(){return null};d={react_stack_bottom_frame:function(g){return g()}};var k,N={},L=d.react_stack_bottom_frame.bind(d,a)(),X=B(r(a)),at={};Wt.Fragment=M,Wt.jsx=function(g,D,W){var I=1e4>w.recentlyCreatedOwnerStacks++;return c(g,D,W,!1,I?Error("react-stack-top-frame"):L,I?B(r(g)):X)},Wt.jsxs=function(g,D,W){var I=1e4>w.recentlyCreatedOwnerStacks++;return c(g,D,W,!0,I?Error("react-stack-top-frame"):L,I?B(r(g)):X)}})()),Wt}var wn;function Dr(){return wn||(wn=1,process.env.NODE_ENV==="production"?he.exports=Hr():he.exports=Or()),he.exports}var j=Dr();const zr=({onClick:t,children:e})=>j.jsx("button",{style:{backgroundColor:"#4ade80",padding:"10px 20px",borderRadius:"5px",border:"none",color:"white",cursor:"pointer"},onClick:t,children:e});function Jt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kn(t){let e,n,r;t.length!==2?(e=Jt,n=(s,u)=>Jt(t(s),u),r=(s,u)=>t(s)-u):(e=t===Jt||t===Fr?t:Br,n=t,r=t);function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:o,right:a}}function Br(){return 0}function Yr(t){return t===null?NaN:+t}const Vr=kn(Jt).right;kn(Yr).center;class An extends Map{constructor(e,n=Ur){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Nn(this,e))}has(e){return super.has(Nn(this,e))}set(e,n){return super.set(Xr(this,e),n)}delete(e){return super.delete(Kr(this,e))}}function Nn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Kr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ur(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Wr=Math.sqrt(50),Jr=Math.sqrt(10),Gr=Math.sqrt(2);function de(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Wr?10:a>=Jr?5:a>=Gr?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?de(t,e,n*2):[s,u,l]}function Zr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?de(e,t,n):de(t,e,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(i+l)/-o;else for(let l=0;l<s;++l)u[l]=(i+l)*o;return u}function Fe(t,e,n){return e=+e,t=+t,n=+n,de(t,e,n)[2]}function qr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Fe(e,t,n):Fe(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Rt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Qr(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}const ti=ei(Math.random);function ei(t){return function(n,r=0,i=n.length){let a=i-(r=+r);for(;a;){const o=t()*a--|0,s=n[a+r];n[a+r]=n[o+r],n[o+r]=s}return n}}function ni(t){return t}var Be=1,Ye=2,Ve=3,Gt=4,Sn=1e-6;function ri(t){return"translate("+t+",0)"}function ii(t){return"translate(0,"+t+")"}function ai(t){return e=>+t(e)}function oi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function si(){return!this.__axis}function $n(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Be||t===Gt?-1:1,c=t===Gt||t===Ye?"x":"y",f=t===Be||t===Ve?ri:ii;function h(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),b=i??(e.tickFormat?e.tickFormat.apply(e,n):ni),M=Math.max(a,0)+s,z=e.range(),R=+z[0]+u,E=+z[z.length-1]+u,x=(e.bandwidth?oi:ai)(e.copy(),u),A=d.selection?d.selection():d,C=A.selectAll(".domain").data([null]),P=A.selectAll(".tick").data(m,e).order(),U=P.exit(),Q=P.enter().append("g").attr("class","tick"),V=P.select("line"),v=P.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(Q),V=V.merge(Q.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),v=v.merge(Q.append("text").attr("fill","currentColor").attr(c,l*M).attr("dy",t===Be?"0em":t===Ve?"0.71em":"0.32em")),d!==A&&(C=C.transition(d),P=P.transition(d),V=V.transition(d),v=v.transition(d),U=U.transition(d).attr("opacity",Sn).attr("transform",function(w){return isFinite(w=x(w))?f(w+u):this.getAttribute("transform")}),Q.attr("opacity",Sn).attr("transform",function(w){var y=this.parentNode.__axis;return f((y&&isFinite(y=y(w))?y:x(w))+u)})),U.remove(),C.attr("d",t===Gt||t===Ye?o?"M"+l*o+","+R+"H"+u+"V"+E+"H"+l*o:"M"+u+","+R+"V"+E:o?"M"+R+","+l*o+"V"+u+"H"+E+"V"+l*o:"M"+R+","+u+"H"+E),P.attr("opacity",1).attr("transform",function(w){return f(x(w)+u)}),V.attr(c+"2",l*a),v.attr(c,l*M).text(b),A.filter(si).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ye?"start":t===Gt?"end":"middle"),A.each(function(){this.__axis=x})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function ge(t){return $n(Ve,t)}function pe(t){return $n(Gt,t)}var li={value:()=>{}};function En(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ye(n)}function ye(t){this._=t}function ci(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ye.prototype=En.prototype={constructor:ye,on:function(t,e){var n=this._,r=ci(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=ui(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Rn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Rn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ye(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function ui(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Rn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=li,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Xe="http://www.w3.org/1999/xhtml";const Mn={svg:"http://www.w3.org/2000/svg",xhtml:Xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function me(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Mn.hasOwnProperty(e)?{space:Mn[e],local:t}:t}function fi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xe&&e.documentElement.namespaceURI===Xe?e.createElement(t):e.createElementNS(n,t)}}function hi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tn(t){var e=me(t);return(e.local?hi:fi)(e)}function di(){}function Ke(t){return t==null?di:function(){return this.querySelector(t)}}function gi(t){typeof t!="function"&&(t=Ke(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new yt(r,this._parents)}function pi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function yi(){return[]}function Cn(t){return t==null?yi:function(){return this.querySelectorAll(t)}}function mi(t){return function(){return pi(t.apply(this,arguments))}}function xi(t){typeof t=="function"?t=mi(t):t=Cn(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),i.push(u));return new yt(r,i)}function Ln(t){return function(){return this.matches(t)}}function In(t){return function(e){return e.matches(t)}}var vi=Array.prototype.find;function _i(t){return function(){return vi.call(this.children,t)}}function bi(){return this.firstElementChild}function wi(t){return this.select(t==null?bi:_i(typeof t=="function"?t:In(t)))}var ki=Array.prototype.filter;function Ai(){return Array.from(this.children)}function Ni(t){return function(){return ki.call(this.children,t)}}function Si(t){return this.selectAll(t==null?Ai:Ni(typeof t=="function"?t:In(t)))}function $i(t){typeof t!="function"&&(t=Ln(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new yt(r,this._parents)}function Pn(t){return new Array(t.length)}function Ei(){return new yt(this._enter||this._groups.map(Pn),this._parents)}function xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xe.prototype={constructor:xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ri(t){return function(){return t}}function Mi(t,e,n,r,i,a){for(var o=0,s,u=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new xe(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function Ti(t,e,n,r,i,a,o){var s,u,l=new Map,c=e.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s)(u=e[s])&&(h[s]=d=o.call(u,u.__data__,s,e)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<f;++s)d=o.call(t,a[s],s,a)+"",(u=l.get(d))?(r[s]=u,u.__data__=a[s],l.delete(d)):n[s]=new xe(t,a[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(h[s])===u&&(i[s]=u)}function Ci(t){return t.__data__}function Li(t,e){if(!arguments.length)return Array.from(this,Ci);var n=e?Ti:Mi,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ri(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=Ii(t.call(c,c&&c.__data__,l,r)),m=d.length,b=s[l]=new Array(m),M=o[l]=new Array(m),z=u[l]=new Array(h);n(c,f,b,M,z,d,e);for(var R=0,E=0,x,A;R<m;++R)if(x=b[R]){for(R>=E&&(E=R+1);!(A=M[E])&&++E<m;);x._next=A||null}}return o=new yt(o,r),o._enter=s,o._exit=u,o}function Ii(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Pi(){return new yt(this._exit||this._groups.map(Pn),this._parents)}function ji(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Hi(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,h=s[u]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;u<i;++u)s[u]=n[u];return new yt(s,this._parents)}function Oi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Di(t){t||(t=zi);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new yt(i,this._parents).order()}function zi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Fi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bi(){return Array.from(this)}function Yi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Vi(){let t=0;for(const e of this)++t;return t}function Xi(){return!this.node()}function Ki(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Ui(t){return function(){this.removeAttribute(t)}}function Wi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ji(t,e){return function(){this.setAttribute(t,e)}}function Gi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function qi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Qi(t,e){var n=me(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Wi:Ui:typeof e=="function"?n.local?qi:Zi:n.local?Gi:Ji)(n,e))}function jn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ta(t){return function(){this.style.removeProperty(t)}}function ea(t,e,n){return function(){this.style.setProperty(t,e,n)}}function na(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ra(t,e,n){return arguments.length>1?this.each((e==null?ta:typeof e=="function"?na:ea)(t,e,n??"")):zt(this.node(),t)}function zt(t,e){return t.style.getPropertyValue(e)||jn(t).getComputedStyle(t,null).getPropertyValue(e)}function ia(t){return function(){delete this[t]}}function aa(t,e){return function(){this[t]=e}}function oa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sa(t,e){return arguments.length>1?this.each((e==null?ia:typeof e=="function"?oa:aa)(t,e)):this.node()[t]}function Hn(t){return t.trim().split(/^|\s+/)}function Ue(t){return t.classList||new On(t)}function On(t){this._node=t,this._names=Hn(t.getAttribute("class")||"")}On.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Dn(t,e){for(var n=Ue(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function zn(t,e){for(var n=Ue(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function la(t){return function(){Dn(this,t)}}function ca(t){return function(){zn(this,t)}}function ua(t,e){return function(){(e.apply(this,arguments)?Dn:zn)(this,t)}}function fa(t,e){var n=Hn(t+"");if(arguments.length<2){for(var r=Ue(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ua:e?la:ca)(n,e))}function ha(){this.textContent=""}function da(t){return function(){this.textContent=t}}function ga(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function pa(t){return arguments.length?this.each(t==null?ha:(typeof t=="function"?ga:da)(t)):this.node().textContent}function ya(){this.innerHTML=""}function ma(t){return function(){this.innerHTML=t}}function xa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function va(t){return arguments.length?this.each(t==null?ya:(typeof t=="function"?xa:ma)(t)):this.node().innerHTML}function _a(){this.nextSibling&&this.parentNode.appendChild(this)}function ba(){return this.each(_a)}function wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ka(){return this.each(wa)}function Aa(t){var e=typeof t=="function"?t:Tn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Na(){return null}function Sa(t,e){var n=typeof t=="function"?t:Tn(t),r=e==null?Na:typeof e=="function"?e:Ke(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $a(){var t=this.parentNode;t&&t.removeChild(this)}function Ea(){return this.each($a)}function Ra(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ma(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ta(t){return this.select(t?Ma:Ra)}function Ca(t){return arguments.length?this.property("__data__",t):this.node().__data__}function La(t){return function(e){t.call(this,e,this.__data__)}}function Ia(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Pa(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function ja(t,e,n){return function(){var r=this.__on,i,a=La(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ha(t,e,n){var r=Ia(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?ja:Pa,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Fn(t,e,n){var r=jn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Oa(t,e){return function(){return Fn(this,t,e)}}function Da(t,e){return function(){return Fn(this,t,e.apply(this,arguments))}}function za(t,e){return this.each((typeof e=="function"?Da:Oa)(t,e))}function*Fa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Bn=[null];function yt(t,e){this._groups=t,this._parents=e}function Zt(){return new yt([[document.documentElement]],Bn)}function Ba(){return this}yt.prototype=Zt.prototype={constructor:yt,select:gi,selectAll:xi,selectChild:wi,selectChildren:Si,filter:$i,data:Li,enter:Ei,exit:Pi,join:ji,merge:Hi,selection:Ba,order:Oi,sort:Di,call:Fi,nodes:Bi,node:Yi,size:Vi,empty:Xi,each:Ki,attr:Qi,style:ra,property:sa,classed:fa,text:pa,html:va,raise:ba,lower:ka,append:Aa,insert:Sa,remove:Ea,clone:Ta,datum:Ca,on:Ha,dispatch:za,[Symbol.iterator]:Fa};function mt(t){return typeof t=="string"?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],Bn)}function We(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function qt(){}var Qt=.7,ve=1/Qt,Ft="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ya=/^#([0-9a-f]{3,8})$/,Va=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),Xa=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Ka=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${te}\\)$`),Ua=new RegExp(`^rgba\\(${bt},${bt},${bt},${te}\\)$`),Wa=new RegExp(`^hsl\\(${te},${bt},${bt}\\)$`),Ja=new RegExp(`^hsla\\(${te},${bt},${bt},${te}\\)$`),Vn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};We(qt,Lt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xn,formatHex:Xn,formatHex8:Ga,formatHsl:Za,formatRgb:Kn,toString:Kn});function Xn(){return this.rgb().formatHex()}function Ga(){return this.rgb().formatHex8()}function Za(){return Zn(this).formatHsl()}function Kn(){return this.rgb().formatRgb()}function Lt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ya.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Un(e):n===3?new dt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_e(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_e(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Va.exec(t))?new dt(e[1],e[2],e[3],1):(e=Xa.exec(t))?new dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ka.exec(t))?_e(e[1],e[2],e[3],e[4]):(e=Ua.exec(t))?_e(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Wa.exec(t))?Gn(e[1],e[2]/100,e[3]/100,1):(e=Ja.exec(t))?Gn(e[1],e[2]/100,e[3]/100,e[4]):Vn.hasOwnProperty(t)?Un(Vn[t]):t==="transparent"?new dt(NaN,NaN,NaN,0):null}function Un(t){return new dt(t>>16&255,t>>8&255,t&255,1)}function _e(t,e,n,r){return r<=0&&(t=e=n=NaN),new dt(t,e,n,r)}function qa(t){return t instanceof qt||(t=Lt(t)),t?(t=t.rgb(),new dt(t.r,t.g,t.b,t.opacity)):new dt}function Je(t,e,n,r){return arguments.length===1?qa(t):new dt(t,e,n,r??1)}function dt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}We(dt,Je,Yn(qt,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qt:Math.pow(Qt,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dt(It(this.r),It(this.g),It(this.b),be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wn,formatHex:Wn,formatHex8:Qa,formatRgb:Jn,toString:Jn}));function Wn(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}`}function Qa(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}${Pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jn(){const t=be(this.opacity);return`${t===1?"rgb(":"rgba("}${It(this.r)}, ${It(this.g)}, ${It(this.b)}${t===1?")":`, ${t})`}`}function be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function It(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pt(t){return t=It(t),(t<16?"0":"")+t.toString(16)}function Gn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xt(t,e,n,r)}function Zn(t){if(t instanceof xt)return new xt(t.h,t.s,t.l,t.opacity);if(t instanceof qt||(t=Lt(t)),!t)return new xt;if(t instanceof xt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new xt(o,s,u,t.opacity)}function to(t,e,n,r){return arguments.length===1?Zn(t):new xt(t,e,n,r??1)}function xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}We(xt,to,Yn(qt,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new xt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qt:Math.pow(Qt,t),new xt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dt(Ge(t>=240?t-240:t+120,i,r),Ge(t,i,r),Ge(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xt(qn(this.h),we(this.s),we(this.l),be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=be(this.opacity);return`${t===1?"hsl(":"hsla("}${qn(this.h)}, ${we(this.s)*100}%, ${we(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qn(t){return t=(t||0)%360,t<0?t+360:t}function we(t){return Math.max(0,Math.min(1,t||0))}function Ge(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ze=t=>()=>t;function eo(t,e){return function(n){return t+n*e}}function no(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ro(t){return(t=+t)==1?Qn:function(e,n){return n-e?no(e,n,t):Ze(isNaN(e)?n:e)}}function Qn(t,e){var n=e-t;return n?eo(t,n):Ze(isNaN(t)?e:t)}const ke=(function t(e){var n=ro(e);function r(i,a){var o=n((i=Je(i)).r,(a=Je(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=Qn(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r})(1);function io(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ao(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oo(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Mt(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function so(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lo(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Mt(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qe=new RegExp(qe.source,"g");function co(t){return function(){return t}}function uo(t){return function(e){return t(e)+""}}function tr(t,e){var n=qe.lastIndex=Qe.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=qe.exec(t))&&(i=Qe.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:vt(r,i)})),n=Qe.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?uo(u[0].x):co(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function Mt(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ze(e):(n==="number"?vt:n==="string"?(r=Lt(e))?(e=r,ke):tr:e instanceof Lt?ke:e instanceof Date?so:ao(e)?io:Array.isArray(e)?oo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lo:vt)(t,e)}function fo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var er=180/Math.PI,tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nr(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*er,skewX:Math.atan(u)*er,scaleX:o,scaleY:s}}var Ae;function ho(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tn:nr(e.a,e.b,e.c,e.d,e.e,e.f)}function go(t){return t==null||(Ae||(Ae=document.createElementNS("http://www.w3.org/2000/svg","g")),Ae.setAttribute("transform",t),!(t=Ae.transform.baseVal.consolidate()))?tn:(t=t.matrix,nr(t.a,t.b,t.c,t.d,t.e,t.f))}function rr(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var b=d.push("translate(",null,e,null,n);m.push({i:b-4,x:vt(l,f)},{i:b-2,x:vt(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:vt(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:vt(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,h,d,m){if(l!==f||c!==h){var b=d.push(i(d)+"scale(",null,",",null,")");m.push({i:b-4,x:vt(l,f)},{i:b-2,x:vt(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),s(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,b=h.length,M;++m<b;)f[(M=h[m]).i]=M.x(d);return f.join("")}}}var po=rr(ho,"px, ","px)","deg)"),yo=rr(go,", ",")",")"),Bt=0,ee=0,ne=0,ir=1e3,Ne,re,Se=0,jt=0,$e=0,ie=typeof performance=="object"&&performance.now?performance:Date,ar=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function en(){return jt||(ar(mo),jt=ie.now()+$e)}function mo(){jt=0}function Ee(){this._call=this._time=this._next=null}Ee.prototype=or.prototype={constructor:Ee,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?en():+n)+(e==null?0:+e),!this._next&&re!==this&&(re?re._next=this:Ne=this,re=this),this._call=t,this._time=n,nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,nn())}};function or(t,e,n){var r=new Ee;return r.restart(t,e,n),r}function xo(){en(),++Bt;for(var t=Ne,e;t;)(e=jt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bt}function sr(){jt=(Se=ie.now())+$e,Bt=ee=0;try{xo()}finally{Bt=0,_o(),jt=0}}function vo(){var t=ie.now(),e=t-Se;e>ir&&($e-=e,Se=t)}function _o(){for(var t,e=Ne,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ne=n);re=t,nn(r)}function nn(t){if(!Bt){ee&&(ee=clearTimeout(ee));var e=t-jt;e>24?(t<1/0&&(ee=setTimeout(sr,t-ie.now()-$e)),ne&&(ne=clearInterval(ne))):(ne||(Se=ie.now(),ne=setInterval(vo,ir)),Bt=1,ar(sr))}}function lr(t,e,n){var r=new Ee;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var bo=En("start","end","cancel","interrupt"),wo=[],cr=0,ur=1,rn=2,Re=3,fr=4,an=5,Me=6;function Te(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;ko(t,n,{name:e,index:r,group:i,on:bo,tween:wo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:cr})}function on(t,e){var n=_t(t,e);if(n.state>cr)throw new Error("too late; already scheduled");return n}function wt(t,e){var n=_t(t,e);if(n.state>Re)throw new Error("too late; already running");return n}function _t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ko(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=or(a,0,n.time);function a(l){n.state=ur,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==ur)return u();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Re)return lr(o);d.state===fr?(d.state=Me,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Me,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(lr(function(){n.state===Re&&(n.state=fr,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=rn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===rn){for(n.state=Re,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=an,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===an&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Me,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Ao(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>rn&&r.state<an,r.state=Me,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function No(t){return this.each(function(){Ao(this,t)})}function So(t,e){var n,r;return function(){var i=wt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function $o(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=wt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Eo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=_t(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?So:$o)(n,t,e))}function sn(t,e,n){var r=t._id;return t.each(function(){var i=wt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return _t(i,r).value[e]}}function hr(t,e){var n;return(typeof e=="number"?vt:e instanceof Lt?ke:(n=Lt(e))?(e=n,ke):tr)(t,e)}function Ro(t){return function(){this.removeAttribute(t)}}function Mo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function To(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Co(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Lo(t,e,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function Io(t,e,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function Po(t,e){var n=me(t),r=n==="transform"?yo:hr;return this.attrTween(t,typeof e=="function"?(n.local?Io:Lo)(n,r,sn(this,"attr."+t,e)):e==null?(n.local?Mo:Ro)(n):(n.local?Co:To)(n,r,e))}function jo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ho(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Oo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ho(t,a)),n}return i._value=e,i}function Do(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&jo(t,a)),n}return i._value=e,i}function zo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=me(t);return this.tween(n,(r.local?Oo:Do)(r,e))}function Fo(t,e){return function(){on(this,t).delay=+e.apply(this,arguments)}}function Bo(t,e){return e=+e,function(){on(this,t).delay=e}}function Yo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fo:Bo)(e,t)):_t(this.node(),e).delay}function Vo(t,e){return function(){wt(this,t).duration=+e.apply(this,arguments)}}function Xo(t,e){return e=+e,function(){wt(this,t).duration=e}}function Ko(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Vo:Xo)(e,t)):_t(this.node(),e).duration}function Uo(t,e){if(typeof e!="function")throw new Error;return function(){wt(this,t).ease=e}}function Wo(t){var e=this._id;return arguments.length?this.each(Uo(e,t)):_t(this.node(),e).ease}function Jo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,t).ease=n}}function Go(t){if(typeof t!="function")throw new Error;return this.each(Jo(this._id,t))}function Zo(t){typeof t!="function"&&(t=Ln(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new Nt(r,this._parents,this._name,this._id)}function qo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=e[s],l=n[s],c=u.length,f=o[s]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;s<r;++s)o[s]=e[s];return new Nt(o,this._parents,this._name,this._id)}function Qo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ts(t,e,n){var r,i,a=Qo(e)?on:wt;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function es(t,e){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(t):this.each(ts(n,t,e))}function ns(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rs(){return this.on("end.remove",ns(this._id))}function is(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ke(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),c,f,h=0;h<u;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Te(l[h],e,n,h,l,_t(c,n)));return new Nt(a,this._parents,e,n)}function as(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Cn(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,m=_t(c,n),b=0,M=h.length;b<M;++b)(d=h[b])&&Te(d,e,n,b,h,m);a.push(h),o.push(c)}return new Nt(a,o,e,n)}var os=Zt.prototype.constructor;function ss(){return new os(this._groups,this._parents)}function ls(t,e){var n,r,i;return function(){var a=zt(this,t),o=(this.style.removeProperty(t),zt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function dr(t){return function(){this.style.removeProperty(t)}}function cs(t,e,n){var r,i=n+"",a;return function(){var o=zt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function us(t,e,n){var r,i,a;return function(){var o=zt(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),zt(this,t))),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}function fs(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var u=wt(this,t),l=u.on,c=u.value[a]==null?s||(s=dr(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function hs(t,e,n){var r=(t+="")=="transform"?po:hr;return e==null?this.styleTween(t,ls(t,r)).on("end.style."+t,dr(t)):typeof e=="function"?this.styleTween(t,us(t,r,sn(this,"style."+t,e))).each(fs(this._id,t)):this.styleTween(t,cs(t,r,e),n).on("end.style."+t,null)}function ds(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function gs(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&ds(t,o,n)),r}return a._value=e,a}function ps(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,gs(t,e,n??""))}function ys(t){return function(){this.textContent=t}}function ms(t){return function(){var e=t(this);this.textContent=e??""}}function xs(t){return this.tween("text",typeof t=="function"?ms(sn(this,"text",t)):ys(t==null?"":t+""))}function vs(t){return function(e){this.textContent=t.call(this,e)}}function _s(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&vs(i)),e}return r._value=t,r}function bs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,_s(t))}function ws(){for(var t=this._name,e=this._id,n=gr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=_t(u,e);Te(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Nt(r,this._parents,t,n)}function ks(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=wt(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),i===0&&a()})}var As=0;function Nt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function gr(){return++As}var St=Zt.prototype;Nt.prototype={constructor:Nt,select:is,selectAll:as,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:Zo,merge:qo,selection:ss,transition:ws,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:es,attr:Po,attrTween:zo,style:hs,styleTween:ps,text:xs,textTween:bs,remove:rs,tween:Eo,delay:Yo,duration:Ko,ease:Wo,easeVarying:Go,end:ks,[Symbol.iterator]:St[Symbol.iterator]};function Ns(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ss={time:null,delay:0,duration:250,ease:Ns};function $s(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Es(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=gr(),(n=Ss).time=en(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&Te(u,t,e,l,o,n||$s(u,e));return new Nt(r,this._parents,t,e)}Zt.prototype.interrupt=No,Zt.prototype.transition=Es;const ln=Math.PI,cn=2*ln,Ht=1e-6,Rs=cn-Ht;function pr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ms(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return pr;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ts{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?pr:Ms(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-e,l=i-n,c=o-e,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Ht)if(!(Math.abs(f*u-l*c)>Ht)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,m=i-s,b=u*u+l*l,M=d*d+m*m,z=Math.sqrt(b),R=Math.sqrt(h),E=a*Math.tan((ln-Math.acos((b+h-M)/(2*z*R)))/2),x=E/R,A=E/z;Math.abs(x-1)>Ht&&this._append`L${e+x*c},${n+x*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=e+A*u},${this._y1=n+A*l}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=e+s,c=n+u,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ht||Math.abs(this._y1-c)>Ht)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%cn+cn),h>Rs?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>Ht&&this._append`A${r},${r},0,${+(h>=ln)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ce(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Yt(t){return t=Ce(Math.abs(t)),t?t[1]:NaN}function Ls(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Is(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ps=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Le(t){if(!(e=Ps.exec(t)))throw new Error("invalid format: "+t);var e;return new un({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Le.prototype=un.prototype;function un(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}un.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function js(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var yr;function Hs(t,e){var n=Ce(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(yr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ce(t,Math.max(0,e+a-1))[0]}function mr(t,e){var n=Ce(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Cs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>mr(t*100,e),r:mr,s:Hs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vr(t){return t}var _r=Array.prototype.map,br=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Os(t){var e=t.grouping===void 0||t.thousands===void 0?vr:Ls(_r.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?vr:Is(_r.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Le(f);var h=f.fill,d=f.align,m=f.sign,b=f.symbol,M=f.zero,z=f.width,R=f.comma,E=f.precision,x=f.trim,A=f.type;A==="n"?(R=!0,A="g"):xr[A]||(E===void 0&&(E=12),x=!0,A="g"),(M||h==="0"&&d==="=")&&(M=!0,h="0",d="=");var C=b==="$"?n:b==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",P=b==="$"?r:/[%p]/.test(A)?o:"",U=xr[A],Q=/[defgprs%]/.test(A);E=E===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function V(v){var w=C,y=P,O,B,k;if(A==="c")y=U(v)+y,v="";else{v=+v;var N=v<0||1/v<0;if(v=isNaN(v)?u:U(Math.abs(v),E),x&&(v=js(v)),N&&+v==0&&m!=="+"&&(N=!1),w=(N?m==="("?m:s:m==="-"||m==="("?"":m)+w,y=(A==="s"?br[8+yr/3]:"")+y+(N&&m==="("?")":""),Q){for(O=-1,B=v.length;++O<B;)if(k=v.charCodeAt(O),48>k||k>57){y=(k===46?i+v.slice(O+1):v.slice(O))+y,v=v.slice(0,O);break}}}R&&!M&&(v=e(v,1/0));var L=w.length+v.length+y.length,X=L<z?new Array(z-L+1).join(h):"";switch(R&&M&&(v=e(X+v,X.length?z-y.length:1/0),X=""),d){case"<":v=w+v+y+X;break;case"=":v=w+X+v+y;break;case"^":v=X.slice(0,L=X.length>>1)+w+v+y+X.slice(L);break;default:v=X+w+v+y;break}return a(v)}return V.toString=function(){return f+""},V}function c(f,h){var d=l((f=Le(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Yt(h)/3)))*3,b=Math.pow(10,-m),M=br[8+m/3];return function(z){return d(b*z)+M}}return{format:l,formatPrefix:c}}var Ie,Vt,wr;Ds({thousands:",",grouping:[3],currency:["$",""]});function Ds(t){return Ie=Os(t),Vt=Ie.format,wr=Ie.formatPrefix,Ie}function zs(t){return Math.max(0,-Yt(Math.abs(t)))}function Fs(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yt(e)/3)))*3-Yt(Math.abs(t)))}function Bs(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Yt(e)-Yt(t))+1}function fn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const kr=Symbol("implicit");function Ar(){var t=new An,e=[],n=[],r=kr;function i(a){let o=t.get(a);if(o===void 0){if(r!==kr)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new An;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ar(e,n).unknown(r)},fn.apply(i,arguments),i}function ae(){var t=Ar().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<r,m=d?i:r,b=d?r:i;a=(b-m)/Math.max(1,h-u+l*2),s&&(a=Math.floor(a)),m+=(b-m-a*(h-u))*c,o=a*(1-u),s&&(m=Math.round(m),o=Math.round(o));var M=Qr(h).map(function(z){return m+a*z});return n(d?M.reverse():M)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),f()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},t.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return ae(e(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},fn.apply(f(),arguments)}function Ys(t){return function(){return t}}function Vs(t){return+t}var Nr=[0,1];function Xt(t){return t}function hn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ys(isNaN(e)?NaN:.5)}function Xs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ks(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=hn(i,r),a=n(o,a)):(r=hn(r,i),a=n(a,o)),function(s){return a(r(s))}}function Us(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=hn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var u=Vr(t,s,1,r)-1;return a[u](i[u](s))}}function Ws(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Js(){var t=Nr,e=Nr,n=Mt,r,i,a,o=Xt,s,u,l;function c(){var h=Math.min(t.length,e.length);return o!==Xt&&(o=Xs(t[0],t[h-1])),s=h>2?Us:Ks,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=s(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=s(e,t.map(r),vt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Vs),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=fo,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Xt,c()):o!==Xt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Gs(){return Js()(Xt,Xt)}function Zs(t,e,n,r){var i=qr(t,e,n),a;switch(r=Le(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Fs(i,o))&&(r.precision=a),wr(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Bs(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=zs(i))&&(r.precision=a-(r.type==="%")*2);break}}return Vt(r)}function qs(t){var e=t.domain;return t.ticks=function(n){var r=e();return Zr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Zs(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);c-- >0;){if(l=Fe(o,s,n),l===u)return r[i]=o,r[a]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function oe(){var t=Gs();return t.copy=function(){return Ws(t,oe())},fn.apply(t,arguments),qs(t)}function se(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Sr=se("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$r=se("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Er=se("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Rr=se("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Mr=se("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function lt(t){return function(){return t}}const Tr=Math.abs,ft=Math.atan2,Ot=Math.cos,Qs=Math.max,dn=Math.min,kt=Math.sin,Kt=Math.sqrt,gt=1e-12,le=Math.PI,Pe=le/2,je=2*le;function tl(t){return t>1?0:t<-1?le:Math.acos(t)}function Cr(t){return t>=1?Pe:t<=-1?-Pe:Math.asin(t)}function el(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ts(e)}function nl(t){return t.innerRadius}function rl(t){return t.outerRadius}function il(t){return t.startAngle}function al(t){return t.endAngle}function ol(t){return t&&t.padAngle}function sl(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,h=f*u-c*l;if(!(h*h<gt))return h=(c*(e-a)-f*(t-i))/h,[t+h*u,e+h*l]}function He(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/Kt(s*s+u*u),c=l*u,f=-l*s,h=t+c,d=e+f,m=n+c,b=r+f,M=(h+m)/2,z=(d+b)/2,R=m-h,E=b-d,x=R*R+E*E,A=i-a,C=h*b-m*d,P=(E<0?-1:1)*Kt(Qs(0,A*A*x-C*C)),U=(C*E-R*P)/x,Q=(-C*R-E*P)/x,V=(C*E+R*P)/x,v=(-C*R+E*P)/x,w=U-M,y=Q-z,O=V-M,B=v-z;return w*w+y*y>O*O+B*B&&(U=V,Q=v),{cx:U,cy:Q,x01:-c,y01:-f,x11:U*(i/A-1),y11:Q*(i/A-1)}}function Lr(){var t=nl,e=rl,n=lt(0),r=null,i=il,a=al,o=ol,s=null,u=el(l);function l(){var c,f,h=+t.apply(this,arguments),d=+e.apply(this,arguments),m=i.apply(this,arguments)-Pe,b=a.apply(this,arguments)-Pe,M=Tr(b-m),z=b>m;if(s||(s=c=u()),d<h&&(f=d,d=h,h=f),!(d>gt))s.moveTo(0,0);else if(M>je-gt)s.moveTo(d*Ot(m),d*kt(m)),s.arc(0,0,d,m,b,!z),h>gt&&(s.moveTo(h*Ot(b),h*kt(b)),s.arc(0,0,h,b,m,z));else{var R=m,E=b,x=m,A=b,C=M,P=M,U=o.apply(this,arguments)/2,Q=U>gt&&(r?+r.apply(this,arguments):Kt(h*h+d*d)),V=dn(Tr(d-h)/2,+n.apply(this,arguments)),v=V,w=V,y,O;if(Q>gt){var B=Cr(Q/h*kt(U)),k=Cr(Q/d*kt(U));(C-=B*2)>gt?(B*=z?1:-1,x+=B,A-=B):(C=0,x=A=(m+b)/2),(P-=k*2)>gt?(k*=z?1:-1,R+=k,E-=k):(P=0,R=E=(m+b)/2)}var N=d*Ot(R),L=d*kt(R),X=h*Ot(A),at=h*kt(A);if(V>gt){var g=d*Ot(E),D=d*kt(E),W=h*Ot(x),I=h*kt(x),ot;if(M<le)if(ot=sl(N,L,W,I,g,D,X,at)){var it=N-ot[0],G=L-ot[1],nt=g-ot[0],ht=D-ot[1],S=1/kt(tl((it*nt+G*ht)/(Kt(it*it+G*G)*Kt(nt*nt+ht*ht)))/2),tt=Kt(ot[0]*ot[0]+ot[1]*ot[1]);v=dn(V,(h-tt)/(S-1)),w=dn(V,(d-tt)/(S+1))}else v=w=0}P>gt?w>gt?(y=He(W,I,N,L,d,w,z),O=He(g,D,X,at,d,w,z),s.moveTo(y.cx+y.x01,y.cy+y.y01),w<V?s.arc(y.cx,y.cy,w,ft(y.y01,y.x01),ft(O.y01,O.x01),!z):(s.arc(y.cx,y.cy,w,ft(y.y01,y.x01),ft(y.y11,y.x11),!z),s.arc(0,0,d,ft(y.cy+y.y11,y.cx+y.x11),ft(O.cy+O.y11,O.cx+O.x11),!z),s.arc(O.cx,O.cy,w,ft(O.y11,O.x11),ft(O.y01,O.x01),!z))):(s.moveTo(N,L),s.arc(0,0,d,R,E,!z)):s.moveTo(N,L),!(h>gt)||!(C>gt)?s.lineTo(X,at):v>gt?(y=He(X,at,g,D,h,-v,z),O=He(N,L,W,I,h,-v,z),s.lineTo(y.cx+y.x01,y.cy+y.y01),v<V?s.arc(y.cx,y.cy,v,ft(y.y01,y.x01),ft(O.y01,O.x01),!z):(s.arc(y.cx,y.cy,v,ft(y.y01,y.x01),ft(y.y11,y.x11),!z),s.arc(0,0,h,ft(y.cy+y.y11,y.cx+y.x11),ft(O.cy+O.y11,O.cx+O.x11),z),s.arc(O.cx,O.cy,v,ft(O.y11,O.x11),ft(O.y01,O.x01),!z))):s.arc(0,0,h,A,x,z)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-le/2;return[Ot(f)*c,kt(f)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:lt(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:lt(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:lt(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:lt(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:lt(+c),l):i},l.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:lt(+c),l):a},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:lt(+c),l):o},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function Ir(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ll(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function cl(t){return t}function ul(){var t=cl,e=ll,n=null,r=lt(0),i=lt(je),a=lt(0);function o(s){var u,l=(s=Ir(s)).length,c,f,h=0,d=new Array(l),m=new Array(l),b=+r.apply(this,arguments),M=Math.min(je,Math.max(-je,i.apply(this,arguments)-b)),z,R=Math.min(Math.abs(M)/l,a.apply(this,arguments)),E=R*(M<0?-1:1),x;for(u=0;u<l;++u)(x=m[d[u]=u]=+t(s[u],u,s))>0&&(h+=x);for(e!=null?d.sort(function(A,C){return e(m[A],m[C])}):n!=null&&d.sort(function(A,C){return n(s[A],s[C])}),u=0,f=h?(M-l*E)/h:0;u<l;++u,b=z)c=d[u],x=m[c],z=b+(x>0?x*f:0)+E,m[c]={data:s[c],index:u,value:x,startAngle:b,endAngle:z,padAngle:R};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:lt(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:lt(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:lt(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:lt(+s),o):a},o}function gn(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function pn(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function fl(t,e){return t[e]}function hl(t){const e=[];return e.key=t,e}function Oe(){var t=lt([]),e=pn,n=gn,r=fl;function i(a){var o=Array.from(t.apply(this,arguments),hl),s,u=o.length,l=-1,c;for(const f of a)for(s=0,++l;s<u;++s)(o[s][l]=[0,+r(f,o[s].key,l,a)]).data=f;for(s=0,c=Ir(e(o));s<u;++s)o[c[s]].index=s;return n(o,c),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:lt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:lt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?pn:typeof a=="function"?a:lt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??gn,i):n},i}function dl(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}gn(t,e)}}function ce(t,e,n){this.k=t,this.x=e,this.y=n}ce.prototype={constructor:ce,scale:function(t){return t===1?this:new ce(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ce(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},ce.prototype;const $t=(t,e)=>{const n=J.useRef(null);return J.useEffect(()=>{e!==void 0&&n.current&&t(mt(n.current))},e===null?void 0:e),n};function ue(){const t=J.useRef(null),[e,n]=J.useState({width:0,height:0});return J.useEffect(()=>{const r=t.current;if(!r||!r.parentElement)return;const i=r.parentElement,a=()=>{const s=i.getBoundingClientRect();n({width:s.width,height:s.height})};a();const o=new ResizeObserver(()=>a());return o.observe(i),()=>o.disconnect()},[]),[t,e]}const At=t=>{try{return JSON.parse(JSON.stringify(t))}catch{return console.log("error when cloning object : "),Array.isArray(t)?[]:null}},Pr=["#bef264","#a3e635","#84cc16","#86efac","#4ade80","#22c55e","#6ee7b7","#34d399","#10b981","#34D399","#5eead4","#2dd4bf","#14b8a6","#67e8f9","#22d3ee","#06b6d4","#7dd3fc","#38bdf8","#0ea5e9","#93c5fd","#60a5fa","#3b82f6","#a5b4fc","#818cf8","#6366f1","#c4b5fd","#a78bfa","#8b5cf6","#d8b4fe","#a855f7","#a855f7","#f9a8d4","#f472b6","#ec4899","#fda4af","#fb7185","#f43f5e","#fca5a5","#f87171","#ef4444","#fdba74","#fb923c","#f97316","#fcd34d","#fbbf24","#f59e0b","#fde047","#facc15","#eab308"];ti([...Er,...$r,...Rr,...Mr,...Sr]);const jr=[...Er,...$r,...Rr,...Mr,...Sr],ct=(t,e=!0)=>{const n=e?[...Pr,...jr]:[...jr,...Pr];return t<n.length?n[t]:n[t%n.length]},Tt=t=>Vt(",")(t);function gl(t,e,n){const{top:r}=e.getBoundingClientRect(),i=t.clientY-r;return{pixelY:i,dataY:n.invert(i)}}const Z={"controls-container":"_controls-container_1fjrs_1","fill-container":"_fill-container_1fjrs_25","controls-label":"_controls-label_1fjrs_39","controls-checkbox":"_controls-checkbox_1fjrs_65","chart-svg":"_chart-svg_1fjrs_79"};function pl({data:t,colorIdx:e=9}){const[n,r]=ue(),{width:i,height:a}=r,[o,s]=J.useState(!1),u=document.getElementById("UI-controls"),l=j.jsx("div",{id:"controls",className:`${Z["controls-container"]} ${u?Z["fill-container"]:""}`,children:j.jsxs("label",{className:Z["controls-label"],children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:o,onChange:h=>s(h.target.checked)}),"Sort"]})}),c=1e3,f=$t(h=>{if(i===0||a===0)return;const d={top:20,right:20,bottom:30,left:25},m=o?At(t).sort((x,A)=>A.value-x.value):At(t),b=h.select(".plot-area"),M=ae().domain(m.map(x=>x.label)).rangeRound([d.left,i-d.right]).padding(.1),z=ge(M).tickValues(M.domain()).scale(M).tickSizeOuter(0);b.select(".x-axis").attr("transform",`translate(0, ${a-d.bottom})`).transition().duration(c).call(z);const R=oe().domain([0,Rt(m,x=>x.value)??0]).rangeRound([a-d.bottom,d.top]),E=pe(R).ticks(null,"s");b.select(".y-axis").attr("transform",`translate(${d.left}, 0)`).transition().duration(c).call(E),b.selectAll(".bar").data(m,x=>x.label).join(x=>x.append("rect").attr("class","bar").attr("x",function(A){return M(A.label)??0}).attr("width",M.bandwidth()).attr("y",R(0)).attr("height",0).attr("fill",ct(e)).transition().duration(c).attr("y",function(A){return R(A.value)}).attr("height",function(A){return R(0)-R(A.value)}),x=>x.transition().duration(c).attr("x",function(C){return M(C.label)??0}).attr("width",M.bandwidth()).attr("y",function(C){return R(C.value)}).attr("height",function(C){return R(0)-R(C.value)}),x=>x.transition().duration(c).attr("fill","#94a3b8").attr("height",0).attr("y",a).style("opacity",0).remove()).on("mouseover",(x,A)=>{b.selectAll("rect.bar").filter(C=>C.label===A.label).style("stroke","#71717a").style("stroke-width",1),mt(".x-axis").selectAll("text").filter(C=>C===A.label).style("font-weight","bold")}).on("mousemove",(x,A)=>{}).on("mouseout",(x,A)=>{b.selectAll("rect.bar").filter(C=>C.label===A.label).style("stroke","none").style("stroke-width",0),mt(".x-axis").selectAll("text").filter(C=>C===A.label).style("font-weight","normal")}).transition().duration(c).attr("x",function(x){return M(x.label)??0}).attr("width",M.bandwidth()).attr("y",function(x){return R(x.value)}).attr("height",function(x){return R(0)-R(x.value)})},[t,i,a,o]);return j.jsxs("div",{ref:n,style:{width:i,height:a,position:"relative",display:"flex",flexDirection:"column"},children:[u&&fe.createPortal(l,u),j.jsx("svg",{ref:f,className:`${Z["chart-svg"]} ${Z["fill-container"]}`,viewBox:`0 0 ${i} ${a}`,children:j.jsxs("g",{className:"plot-area",children:[j.jsx("g",{className:"y-axis"}),j.jsx("g",{className:"x-axis"})]})}),!u&&j.jsxs("label",{className:Z["controls-label"],style:{position:"absolute",right:"12px",top:"6px"},children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:o,onChange:h=>s(h.target.checked)}),"Sort"]})]})}function De(){const t=J.useRef(null),[e,n]=J.useState({width:0,height:0});return J.useEffect(()=>{const r=t.current;if(!r)return;const i=new ResizeObserver(([a])=>{a?.contentRect&&n({width:a.contentRect.width,height:a.contentRect.height})});return i.observe(r,{box:"border-box"}),n({width:r.offsetWidth,height:r.offsetHeight}),()=>{i.disconnect()}},[]),[t,e]}const ze=t=>{const e=J.useRef([]);return J.useEffect(()=>{const n=e.current;if(t.length===0){e.current=[];return}const r=t.some(a=>n.includes(a)),i=t.filter(a=>!n.includes(a));if(!r){e.current=[...t];return}if(i.length>0){e.current=[...n,...i];return}},[t]),e},Et={legend:"_legend_56y3j_1","legend-active":"_legend-active_56y3j_1","legend-rect":"_legend-rect_56y3j_21",pieSlice:"_pieSlice_56y3j_41",pieSliceNotHovered:"_pieSliceNotHovered_56y3j_51",animateNotHovered:"_animateNotHovered_56y3j_1",pieSliceExit:"_pieSliceExit_56y3j_75",animateHide:"_animateHide_56y3j_1",pieLabelEnter:"_pieLabelEnter_56y3j_93",showText:"_showText_56y3j_1",pieLabelUnhover:"_pieLabelUnhover_56y3j_117",pieLabelUpdate:"_pieLabelUpdate_56y3j_147",pieLabelExit:"_pieLabelExit_56y3j_161"};function yl({data:t,innerRadius:e=0,sortWithLegends:n=!1}){const[r,i]=ue(),{width:a,height:o}=i,[s,u]=De(),{width:l,height:c}=u,f=ze(t.map(C=>C.label)),[h,d]=J.useState([]),[m,b]=J.useState(!1),[M,z]=J.useState(""),R=750,E=$t(C=>{const U=(n&&m?At(t).sort((V,v)=>V.value-v.value):t).map(V=>V.label);C.selectAll(".legend-item").data([...U],V=>V).join(V=>{const v=V.append("div").attr("class",function(w){return`${Et[w===M?"legend-active":"legend"]} legend-item`}).style("left","-10px").style("top",function(w,y){return`${y*20+10}px`}).style("opacity",0);return v.append("div").attr("class",`rect ${Et["legend-rect"]}`).style("background-color",w=>ct(f.current.findIndex(y=>y===w))),v.append("span").style("color",w=>"#333").text(w=>w),v.transition().duration(R).style("left","6px").style("opacity",1),v},V=>(V.attr("class",v=>`    
                                ${Et[v===M?"legend-active":"legend"]} legend-item`).transition().duration(R).style("top",function(v,w){return`${w*20+10}px`}).style("left","6px").style("opacity",1).select("div.rect").attr("class",`rect ${Et["legend-rect"]}`).style("background-color",v=>ct(f.current.findIndex(w=>w===v))),V.select("span").style("color",v=>"#333").text(v=>v),V),V=>V.transition().duration(R).style("opacity",0).style("left","30px").remove()).on("mouseover",(V,v)=>{z(v)}).on("mouseout",()=>{z("")})},[t,l,c,M,m,n]),x=$t(C=>{if(l===0||c===0)return;const P={x:l/2,y:c/2},U={top:10,right:20,bottom:10,left:20},Q=t,V=l-(U.left+U.right),v=c-(U.top+U.bottom),w=Math.min(V,v)/2,y=Q.reduce((S,tt)=>S+tt.value,0),O=C.select(".plot-area").attr("transform","translate("+P.x+","+P.y+")"),B=ul().value(function(S){return S.value}).sort(function(S,tt){return m?Jt(S.value,tt.value):0}),k=At(Q),N=B(k),L=At(k);d(B(L));let X=L.length>k.length;const at=h.map(S=>S.data.label),g=N.map(S=>S.data.label);at.every(S=>X?!1:g.includes(S)?!0:(X=!0,!1));const D=h.length===0,I=Lr().innerRadius(e).outerRadius(w-12),ot=Lr().innerRadius(e).outerRadius(w),it=(S,tt)=>{const rt=Mt(tt==="exit"?S.endAngle:S.startAngle,tt==="exit"?S.startAngle:S.endAngle),st=S.data.label===M;return function(H){return S.endAngle=rt(H),st?ot(S)||"":I(S)||""}};O.selectAll("path").data(N,function(S){return S.data.label}).join(S=>{const tt=S.append("path").attr("class",Et.pieSlice).attr("fill",function(rt){const st=f.current.findIndex(H=>H===rt.data.label);return ct(st)});return tt.transition().duration(R).delay(D?0:R).attr("d",I).attrTween("d",function(rt){if(!D)return it(rt,"not exit");const st=Mt(0,rt.startAngle),H=Mt(0,rt.endAngle),Y=rt.data.label===M;return function(F){return rt.startAngle=st(F),rt.endAngle=H(F),Y?ot(rt):I(rt)}}),tt},S=>{const tt=S;return S.transition().duration(R).attr("fill",function(rt,st){const H=f.current.findIndex(Y=>Y===rt.data.label);return ct(H)}).attrTween("d",function(rt){const st=h.find(p=>p.data.label===rt.data.label),H=st&&st.startAngle?st.startAngle:0,Y=Mt(H,rt.startAngle),F=st&&st.endAngle?st.endAngle:0,q=Mt(F,rt.endAngle),T=rt.data.label===M;return function(p){return rt.startAngle=Y(p),rt.endAngle=q(p),T?ot(rt)||"":I(rt)||""}}),tt},S=>S.attr("class",Et.pieSliceExit).transition().duration(R).attrTween("d",function(tt){return it(tt,"exit")}).remove()).on("mouseover",function(S,tt){z(tt.data.label)}).on("mouseout",()=>{z("")});const nt=S=>Q.length===1?"translate(0, 0)":`translate(${I.centroid(S)})`,ht=S=>{const tt=S.value/y;return Vt(".1%")(tt)};O.selectAll("text").data(N,function(S){return S.data.label}).join(S=>{const tt=S.append("text").text(ht).attr("class",Et.pieLabelEnter);return tt.merge(tt).transition().duration(R).delay(R).attr("transform",nt),tt},S=>{const tt=S.text(ht);return S.merge(tt).attr("class",Et.pieLabelUpdate).transition().duration(M!==""?250:R).style("opacity",function(rt){const st=M===rt.data.label;return M===""||st?1:0}).attr("transform",nt),tt},S=>S.transition().duration(R/2).attr("class",Et.pieLabelExit).remove())},[t,e,l,c,m,M]),A=a>o;return j.jsxs("div",{ref:r,style:{width:a,height:o,position:"relative",display:"flex",flexDirection:A?"row":"column",overflow:"hidden"},children:[j.jsx("div",{ref:s,style:{flex:1,position:"relative",display:"flex"},children:j.jsx("svg",{ref:x,className:`${Z["chart-svg"]} ${Z["fill-container"]}`,viewBox:`0 0 ${l} ${c}`,children:j.jsx("g",{className:"plot-area"})})}),j.jsx("div",{style:{width:A?"180px":"100%",height:A?"100%":"180px",flexShrink:0,overflowY:"auto",background:"rgba(0,0,0,0.03)",borderLeft:A?"1px solid #ddd":"none",borderTop:A?"none":"1px solid #ddd",padding:"0px"},children:j.jsx("div",{ref:E,className:"legends-content",style:{display:"flex",flexDirection:"column",gap:"6px",padding:"8px 8px 16px 8px",boxSizing:"border-box",position:"relative"}})}),j.jsxs("label",{className:Z["controls-label"],style:{position:"absolute",left:"12px",top:"6px"},children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:m,onChange:C=>b(C.target.checked)}),"Sort"]})]})}const Ct={tooltip:"_tooltip_4lu3m_3","tooltip--arrow-up":"_tooltip--arrow-up_4lu3m_73","tooltip--arrow-down":"_tooltip--arrow-down_4lu3m_101",title:"_title_4lu3m_167","text-small":"_text-small_4lu3m_213","right-label":"_right-label_4lu3m_225"},yn=({pCount:t})=>j.jsxs("div",{id:"tooltip",className:`${Ct.tooltip}`,children:[!t&&j.jsx("p",{className:`${Ct["text-small"]}`}),t===3&&j.jsxs(j.Fragment,{children:[j.jsx("p",{className:`title ${Ct.title}`}),j.jsx("p",{className:`top-label ${Ct["right-label"]}`}),j.jsx("p",{className:`bottom-label ${Ct["right-label"]}`})]})]}),mn=(t,e="tooltip")=>t.select(`#${e}`).style("pointer-events","none").style("position","fixed").style("left","auto").style("top","auto").style("bottom","auto").style("right","auto").style("padding","8px 5px").style("max-width","200px").style("opacity",0);function xn(t,e){const{e:n,svg:r,yScale:i}=e,{pixelY:a}=gl(n,r,i),o=a<100?"bottom":"top",{offsetWidth:s,offsetHeight:u}=t.node()||{},l=document.documentElement.clientWidth,c=n.x-s/2;let f=0;if(c<0)f=0;else if(c+s>l){const d=c+s-l;f=c-d}else f=c;const h=o==="top"?Ct["tooltip--arrow-down"]:Ct["tooltip--arrow-up"];t.attr("class",`${Ct.tooltip} ${h}`).style("left",f+"px").style("top",o==="top"?n.y-(u+20)+"px":n.y+30+"px")}const K={"legends-container":"_legends-container_ty2re_1","legend-container":"_legend-container_ty2re_61","legend-container-active":"_legend-container-active_ty2re_61","legend-container-inactive":"_legend-container-inactive_ty2re_61","legend-rect":"_legend-rect_ty2re_105","legend-label":"_legend-label_ty2re_121",rect:"_rect_ty2re_201",rectCard:"_rectCard_ty2re_201",rectLegendNotHovered:"_rectLegendNotHovered_ty2re_213",legend:"_legend_ty2re_1",rectHoveredLegend:"_rectHoveredLegend_ty2re_249",rectCardLegendHovered:"_rectCardLegendHovered_ty2re_259",rectLegendHovered:"_rectLegendHovered_ty2re_271",rotatedAxisText:"_rotatedAxisText_ty2re_283",axisText:"_axisText_ty2re_293",hoveredAxisText:"_hoveredAxisText_ty2re_303",yAxisLabel:"_yAxisLabel_ty2re_317"},vn="#d1d5db";function ml({stackData:t,focusOnPlot:e=!1}){const[n,r]=ue(),{width:i,height:a}=r,[o,s]=De(),{height:u}=s,[l,c]=J.useState(!1),[f,h]=J.useState(["all"]),[d,m]=J.useState(!1),[b,M]=J.useState(""),[z,R]=J.useState(!1),E=document.getElementById("UI-controls");J.useEffect(()=>{h(["all"]),c(!0)},[t]);const x=750;J.useEffect(()=>{let y;return l&&(y=setTimeout(()=>{c(!1)},x+250)),()=>{clearTimeout(y)}},[l]);const A=E?a:a-u,C=[i,A,f],P=At(t),U=P.length===0?[]:Object.keys(P[0]).filter(y=>y!=="label"&&y!=="total"),Q=ze(U),V=$t(y=>{if(l)return;const O=80;y.selectAll(".legend-item").data([...U],k=>k).join(k=>{const N=k.append("div").attr("class",function(L){return`
                                ${f.includes(L)?K[e?"legend-container-active":"legend-container-inactive"]:K["legend-container"]}
                                legend-item
                            `}).style("left",(L,X)=>`${X*O}px`).style("top","-53px").style("opacity",0);return N.append("div").attr("class",K["legend-rect"]).style("background",L=>{if(!e&&f.includes(L))return vn;const X=Q.current.findIndex(at=>at===L);return ct(X)}),N.append("span").attr("class",K["legend-label"]).style("color",L=>!e&&f.includes(L)?"#d1d5db":"#333").text(L=>L),N.transition().duration(x).style("top","0px").style("opacity",1),N},k=>(k.attr("class",N=>`                                
                                ${f.includes(N)?K[e?"legend-container-active":"legend-container-inactive"]:K["legend-container"]}
                                legend-item`).transition().duration(x).style("top","0px").style("left",(N,L)=>`${L*O}px`).style("opacity",1).select(`.${K["legend-rect"]}`).style("background",N=>{if(!e&&f.includes(N))return vn;const L=Q.current.findIndex(X=>X===N);return ct(L)}),k.select(`.${K["legend-label"]}`).style("color",N=>!e&&f.includes(N)?vn:"#333").text(N=>N),k),k=>k.transition().duration(x).style("opacity",0).style("top","53px").remove()).on("mouseover",function(k,N){l||M(N)}).on("mouseout",function(k,N){l||(M(""),d&&m(!1))}).on("click",(k,N)=>{h(L=>{let X=[];return e?L[0]===N?X=["all"]:X=[N]:L.includes(N)?X=L.filter(at=>at!==N):X=[...L,N],X}),m(!0)})},[...C,U,l]),v=j.jsxs("div",{ref:o,className:`${Z["controls-container"]} ${E?Z["fill-container"]:""}`,children:[j.jsxs("label",{className:Z["controls-label"],style:{paddingRight:"12px"},children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:z,onChange:y=>R(y.target.checked)}),"Sort"]}),j.jsx("div",{ref:V,id:"stacked-barchart-legends",className:`${K["legends-container"]}`})]}),w=$t(y=>{if(i===0||A===0||b!==""&&l)return;const O={top:20,right:30,bottom:30,left:40},B=i>1024,k=e?U:U.filter(p=>!f.includes(p));P.forEach(p=>{const $=k.reduce((_,et)=>{const ut=p[et];return _+(typeof ut=="number"?ut:0)},0);p.total=$});const N=P,L=z?At(N).sort(function(p,$){return e?f[0]==="all"?p.total-$.total:Number(p[f[0]])-Number($[f[0]]):p.total-$.total}):N,X=i-O.left-O.right,at=A-O.top-O.bottom,g=y.select("svg"),D=g.node(),W=g.select(".plot-area").attr("transform","translate("+O.left+","+O.top+")"),I=mn(y),ot=B?K.axisText:K.rotatedAxisText,it=ae().rangeRound([0,X]).paddingInner(.1).align(.2),G=L.map(function(p){return p.label});it.domain(G);const nt=[],ht=ge(it).tickValues(it.domain()).scale(it).tickSizeOuter(0);W.select(".x-axis").attr("transform",`translate(0,${at})`).transition().duration(x).call(ht).selectAll("text").style("cursor","pointer").attr("dy",B?"1em":".20em").attr("dx",B?"0em":"-.8em").attr("class",ot);const S=oe().range([at,0]),tt=e?f[0]==="all"?Rt(P,p=>p.total):Rt(P,p=>p[f[0]]):Rt(P,p=>p.total);S.domain([0,tt??0]);const rt=pe(S).ticks(null,"s");W.select(".y-axis").attr("transform","translate(0,0)").style("color","steelblue").transition().duration(x).call(rt);const H=Oe().keys(k)(L).map(p=>{const $=p.key,_=p.map(et=>{const ut=et.data.label;return{...et,key:`${$} - ${ut}`,barKey:$}});return _.key=$,_}),Y=W.selectAll(".serie").data(H,p=>p.key).join(p=>p.append("g").attr("class","serie").attr("fill",_=>{const et=Q.current.findIndex(Dt=>Dt===_.key);return ct(et)}).style("opacity",_=>{if(b!=="")if(e){if(f[0]==="all")return _.key===b||d?1:.25}else return d?1:_.key===b?.25:1;return e?f[0]==="all"||_.key===f[0]?1:0:1}).style("pointer-events",_=>e?f[0]==="all"||_.key===f[0]?"auto":"none":"auto"),p=>p.transition().duration(x).attr("fill",_=>{const et=Q.current.findIndex(Dt=>Dt===_.key);return ct(et)}).style("opacity",_=>{if(b!=="")if(e){if(f[0]==="all")return _.key===b||d?1:.25}else return d?1:_.key===b?.25:1;return e?f[0]==="all"||_.key===f[0]?1:0:1}).style("pointer-events",_=>e?f[0]==="all"||_.key===f[0]?"auto":"none":"auto"),p=>p.transition().duration(x).style("opacity",0).attr("fill","grey").selectAll("rect").attr("y",at).attr("height",0).remove()),F=p=>{if(p.barKey===b)return"none";const $=it.bandwidth(),_=S(p[0])-S(p[1]),et=isNaN(_)||_<0?0:_;return k.indexOf(p.barKey)===k.length-1||p.barKey===f[0]?`${$+et} ${$} ${et}`:`${et} ${$}`},q=p=>{const $=it.bandwidth();return k.indexOf(p.barKey)===k.length-1||p.barKey===f[0]?0:$*-1},T=p=>b!==""&&b===p.barKey&&e?`rect ${K.rectLegendHovered}`:`rect ${K.rect}`;Y.selectAll("rect").data(p=>p,p=>p.data.label).join(p=>p.append("rect").attr("class",`rect ${Z.rect}`).attr("x",_=>it(_.data.label+"")??0).attr("width",it.bandwidth()).attr("y",_=>{if(!nt.includes(_.data.label))return at;const et=f[0]==="all"?S(_[1]):_.key.startsWith(f[0])?at-(S(_[0])-S(_[1])):S(_[1]),ut=S(_[0])-S(_[1]),Dt=isNaN(ut)||ut<0?0:ut;return et+Dt}).attr("height",0).attr("stroke-dasharray",F).attr("stroke-dashoffset",q).transition().duration(x).attr("x",_=>it(_.data.label+"")??0).attr("width",it.bandwidth()).attr("height",_=>{const et=S(_[0])-S(_[1]);return isNaN(et)||et<0?0:et}).attr("y",_=>f[0]==="all"?S(_[1]):at-(S(_[0])-S(_[1]))),void 0,p=>p.transition().duration(x).attr("opacity",0).attr("y",at).attr("height",0).remove()).attr("class",T).attr("stroke-dasharray",F).attr("stroke-dashoffset",q).transition().duration(x).attr("x",p=>it(p.data.label+"")??0).attr("width",it.bandwidth()).attr("height",p=>{const $=S(p[0])-S(p[1]);return isNaN($)||$<0?0:$}).attr("y",p=>f[0]==="all"?S(p[1]):at-(S(p[0])-S(p[1]))).on("start",function(){}).on("end",function(){}),Y.selectAll("rect").on("mouseover",function(p,$){mt(".x-axis").selectAll("text").filter(ut=>ut===$.data.label).attr("class",ot+" "+K.hoveredAxisText),I.style("opacity",1).select("p.title").text($.data.label);const _=$.data[$.barKey],{total:et}=$.data;I.select("p.top-label").text($.barKey+" : "+Tt(_)),I.select("p.bottom-label").text(f[0]==="all"?`Total : ${Tt(et)}`:"~")}).on("touch",function(p,$){mt(".x-axis").selectAll("text").filter(_=>_===$.data.label)}).on("mousemove",(p,$)=>{xn(I,{e:p,svg:D,yScale:S})}).on("mouseout",function(p,$){mt(".x-axis").selectAll("text").filter(_=>_===$.data.label).attr("class",ot),I.style("opacity",0)})},[...C,z,P,U,b,e,d,l]);return j.jsxs("div",{ref:n,style:{width:i,height:a,display:"flex",flexDirection:"column"},children:[E?fe.createPortal(v,E):v,j.jsxs("div",{ref:w,className:`${Z["fill-container"]}`,style:{display:"flex",flexDirection:"column"},children:[j.jsx("svg",{className:`${Z["chart-svg"]} ${Z["fill-container"]}`,viewBox:`0 0 ${i} ${A}`,children:j.jsxs("g",{className:"plot-area",children:[j.jsx("g",{className:"plot-rects"}),j.jsx("g",{className:"y-axis"}),j.jsx("g",{className:"x-axis"})]})}),j.jsx(yn,{pCount:3})]})]})}function xl({stackData:t}){const[e,n]=ue(),{width:r,height:i}=n,[a,o]=De(),{height:s}=o,[u,l]=J.useState(!1),[c,f]=J.useState("all"),[h,d]=J.useState(!1),[m,b]=J.useState(""),[M,z]=J.useState(!1),R=document.getElementById("UI-controls");J.useEffect(()=>{f("all"),l(!0)},[t]);const E=750;J.useEffect(()=>{let w;return u&&(w=setTimeout(()=>{l(!1)},E+250)),()=>{clearTimeout(w)}},[u]);const x=R?i:i-s,A=[r,x,c],C=At(t),P=C.length===0?[]:Object.keys(C[0]).filter(w=>w!=="label"&&w!=="total"),U=ze(P),Q=$t(w=>{if(u)return;const y=80;w.selectAll(".legend-item").data([...P],B=>B).join(B=>{const k=B.append("div").attr("class",function(N){return`                                
                                ${c===N?K["legend-container-active"]:K["legend-container"]} 
                                legend-item`}).style("left",(N,L)=>`${L*y}px`).style("top","-53px").style("opacity",0);return k.append("div").attr("class",K["legend-rect"]).style("background",N=>{const L=U.current.findIndex(X=>X===N);return ct(L)}),k.append("span").attr("class",K["legend-label"]).text(N=>N),k.transition().duration(E).style("top","0px").style("opacity",1),k},B=>(B.attr("class",k=>`                                
                                ${c===k?K["legend-container-active"]:K["legend-container"]} 
                                legend-item`).transition().duration(E).style("top","0px").style("left",(k,N)=>`${N*y}px`).style("opacity",1).select(`.${K["legend-rect"]}`).style("background",k=>{const N=U.current.findIndex(L=>L===k);return ct(N)}),B.select(`.${K["legend-label"]}`).text(k=>k),B),B=>B.transition().duration(E).style("opacity",0).style("top","53px").remove().remove()).on("click",(B,k)=>{f(N=>N===k?"all":k)}).on("mouseover",(B,k)=>{b(k)}).on("mouseout",(B,k)=>{b("")})},[...A,P,u]),V=j.jsxs("div",{ref:a,className:`${Z["controls-container"]} ${R?Z["fill-container"]:""}`,children:[j.jsxs("label",{className:Z["controls-label"],style:{paddingRight:"12px"},children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:M,onChange:w=>z(w.target.checked)}),"Sort"]}),j.jsx("div",{ref:Q,id:"stacked-barchart-legends",className:`${K["legends-container"]}`})]}),v=$t(w=>{if(r===0||x===0||m!==""&&u)return;const y={top:20,right:30,bottom:30,left:40},O=r>1024;C.forEach(function(H){H.total=P.reduce((Y,F)=>{const q=H[F];return Y+(typeof q=="number"?q:Number(q))},0)});const B=C,k=M?At(B).sort(function(H,Y){return Number(H[c])-Number(Y[c])}):B,N=r-y.left-y.right,L=x-y.top-y.bottom,X=w.select("svg"),at=X.node(),g=X.select(".plot-area").attr("transform","translate("+y.left+","+y.top+")"),D=mn(w),W=O?K.axisText:K.rotatedAxisText,I=ae().rangeRound([0,N]).paddingInner(.1).align(.2),ot=k.map(function(H){return H.label});I.domain(ot);const it=ge(I).tickValues(I.domain()).scale(I).tickSizeOuter(0);g.select(".x-axis").attr("transform",`translate(0,${L})`).transition().duration(E).call(it).selectAll("text").style("cursor","pointer").attr("dy",O?"1em":".20em").attr("dx",O?"0em":"-.8em").attr("class",W);const G=oe().range([L,0]),nt=c==="all"?Rt(C,H=>Rt(Object.entries(H).filter(([Y])=>Y!=="total"&&Y!=="label").map(([,Y])=>Y))):Rt(C,H=>H[c]);G.domain([0,nt??0]);const ht=pe(G).ticks(null,"s");g.select(".y-axis").attr("transform","translate(0,0)").style("color","steelblue").transition().duration(E).call(ht);const tt=Oe().keys(P)(k).map(H=>{const Y=H.key,F=H.map(q=>{const T=Object.keys(q.data).filter(p=>p!=="label"&&p!=="total").map(p=>({label:p,value:q.data[p]})).sort((p,$)=>Number(p.value)-Number($.value));return{...q,key:`${Y} - ${q.data.label}`,barKey:Y,data:{...q.data,sortedLayers:T.map(p=>p.label)}}});return F.key=Y,F}),rt=H=>m!==""&&m===H.barKey?`rect ${K.rectLegendHovered}`:`rect ${K.rect}`;let st=g.selectAll(".serie").data(tt,function(H){return H.key}).join(H=>H.append("g").attr("class","serie").attr("fill",function(F){const q=U.current.findIndex(T=>T===F.key);return ct(q)}).style("opacity",F=>c==="all"||F.key===c?1:0).style("pointer-events",F=>c==="all"||F.key===c?"auto":"none"),H=>H.transition().duration(E).attr("fill",function(F){const q=U.current.findIndex(T=>T===F.key);return ct(q)}).style("opacity",F=>c==="all"||F.key===c?1:0).style("pointer-events",F=>c==="all"||F.key===c?"auto":"none"),H=>H.transition().duration(E).style("opacity",0).attr("fill","grey").selectAll("rect").attr("y",L).attr("height",0).remove());st.selectAll("rect").data(H=>H,H=>H.data.label).join(H=>{let Y;return Y=H.append("rect").attr("class",rt).attr("x",function(F){const q=P.indexOf(F.barKey);return(I(F.data.label+"")??0)+q*(I.bandwidth()/P.length)}).attr("width",function(F){return c==="all"?I.bandwidth()/P.length:I.bandwidth()}).attr("y",L).attr("height",0).transition().duration(E).attr("x",function(F){const q=I(F.data.label+"")??0;if(c==="all"){const T=M?F.data.sortedLayers:P,p=Array.isArray(T)&&T.indexOf(F.barKey)||0;return q+p*(I.bandwidth()/P.length)}return q}).attr("width",function(F){return c==="all"?I.bandwidth()/P.length:I.bandwidth()}).attr("height",function(F){const q=G(F[0])-G(F[1]);return isNaN(q)||q<0?0:q}).attr("y",function(F){return L-(G(F[0])-G(F[1]))}),Y},void 0,H=>H.transition().duration(E).attr("opacity",0).attr("height",0).attr("y",L).remove()).attr("class",rt).transition().duration(E).attr("x",function(H){const Y=I(H.data.label+"")??0;if(c==="all"){const F=M?H.data.sortedLayers:P,q=Array.isArray(F)&&F.indexOf(H.barKey)||0;return Y+q*(I.bandwidth()/P.length)}return Y}).attr("width",function(H){return c==="all"?I.bandwidth()/P.length:I.bandwidth()}).attr("height",function(H){const Y=G(H[0])-G(H[1]);return isNaN(Y)||Y<0?0:Y}).attr("y",function(H){return L-(G(H[0])-G(H[1]))}),st.selectAll("rect").on("mouseover",function(H,Y){mt(".x-axis").selectAll("text").filter(p=>p===Y.data.label).attr("class",W+" "+K.hoveredAxisText),D.style("opacity",1).select("p.title").text(Y.data.label);const F=Y.data[Y.barKey],{total:q}=Y.data,T=F/q*100;Vt(".1f")(T)+"",D.select("p.top-label").text(Y.barKey+" : "+Tt(F)),D.select("p.bottom-label").text(c==="all"?`Total : ${Tt(q)}`:"~")}).on("touch",function(H,Y){mt(".x-axis").selectAll("text").filter(F=>F===Y.data.label).attr("class",W)}).on("mousemove",(H,Y)=>{xn(D,{e:H,svg:at,yScale:G})}).on("mouseout",function(H,Y){mt(".x-axis").selectAll("text").filter(F=>F===Y.data.label).attr("class",W),D.style("opacity",0)})},[...A,M,C,P,m,h,u]);return j.jsxs("div",{ref:e,style:{width:r,height:i,display:"flex",flexDirection:"column"},children:[R?fe.createPortal(V,R):V,j.jsxs("div",{ref:v,className:`${Z["fill-container"]}`,style:{display:"flex",flexDirection:"column"},children:[j.jsx("svg",{className:`${Z["chart-svg"]} ${Z["fill-container"]}`,viewBox:`0 0 ${r} ${x}`,children:j.jsxs("g",{className:"plot-area",children:[j.jsx("g",{className:"plot-rects"}),j.jsx("g",{className:"y-axis"}),j.jsx("g",{className:"x-axis"})]})}),j.jsx(yn,{pCount:3})]})]})}function vl({stackData:t}){const[e,n]=ue(),{width:r,height:i}=n,[a,o]=J.useState(""),[s,u]=J.useState(!0),[l,c]=J.useState(!1),[f,h]=De(),{height:d}=h,[m,b]=J.useState("all"),[M,z]=J.useState(!1),R=document.getElementById("UI-controls");J.useEffect(()=>{b("all"),u(!0),c(!0)},[t]);const E=750;J.useEffect(()=>{let w;return l&&(w=setTimeout(()=>{c(!1)},E+250)),()=>{clearTimeout(w)}},[l]);const x=R?i:i-d,A=[r,x,m],C=At(t),P=C.length===0?[]:Object.keys(C[0]).filter(w=>w!=="label"&&w!=="total"),U=ze(P),Q=$t(w=>{if(l)return;const y=80;w.selectAll(".legend-item").data([...P],B=>B).join(B=>{const k=B.append("div").attr("class",function(N){return`                                
                                ${m===N?K["legend-container-active"]:K["legend-container"]} 
                                legend-item`}).style("left",(N,L)=>`${L*y}px`).style("top","-53px").style("opacity",0);return k.append("div").attr("class",K["legend-rect"]).style("background",N=>{const L=U.current.findIndex(X=>X===N);return ct(L)}),k.append("span").attr("class",K["legend-label"]).text(N=>N),k.transition().duration(E).style("top","0px").style("opacity",1),k},B=>(B.attr("class",k=>`                                
                                ${m===k?K["legend-container-active"]:K["legend-container"]} 
                                legend-item`).transition().duration(E).style("top","0px").style("left",(k,N)=>`${N*y}px`).style("opacity",1).select(`.${K["legend-rect"]}`).style("background",k=>{const N=U.current.findIndex(L=>L===k);return ct(N)}),B.select(`.${K["legend-label"]}`).text(k=>k),B),B=>B.transition().duration(E).style("opacity",0).style("top","53px").remove().remove().remove()).on("mouseover",(B,k)=>{o(k)}).on("mouseout",function(B){o("")})},[...A,P,l]),V=j.jsxs("div",{ref:f,className:`${Z["controls-container"]} ${R?Z["fill-container"]:""}`,children:[j.jsxs("label",{className:Z["controls-label"],style:{paddingRight:"12px"},children:[j.jsx("input",{type:"checkbox",className:Z["controls-checkbox"],checked:s,onChange:w=>u(w.target.checked)}),"Percentage"]}),j.jsx("div",{ref:Q,id:"stacked-barchart-legends",className:`${K["legends-container"]}`})]}),v=$t(w=>{if(r===0||x===0||a!==""&&l)return;const y={top:20,right:30,bottom:30,left:40},O=r>1024;C.forEach(function(T){T.total=P.reduce((p,$)=>{const _=T[$];return p+(typeof _=="number"?_:Number(_))},0)});const k=C.filter(T=>T?.total&&T.total>0),N=r-y.left-y.right,L=x-y.top-y.bottom,X=w.select("svg"),at=X.node(),g=X.select(".plot-area").attr("transform","translate("+y.left+","+y.top+")"),D=mn(w),W=O?K.axisText:K.rotatedAxisText,I=ae().rangeRound([0,N]).paddingInner(.1).align(.2),ot=k.map(function(T){return T.label});I.domain(ot);const it=[],G=ge(I).tickValues(I.domain()).scale(I).tickSizeOuter(0);g.select(".x-axis").attr("transform",`translate(0,${L})`).transition().duration(E).call(G).selectAll("text").style("cursor","pointer").attr("dy",O?"1em":".20em").attr("dx",O?"0em":"-.8em").attr("class",W);const nt=oe().range([L,0]),ht=Rt(C,T=>T.total);nt.domain([0,s?1:ht||0]).nice();const S=pe(nt).ticks(null,s?".0%":"s");g.select(".y-axis").attr("transform","translate(0,0)").style("color","steelblue").transition().duration(E).call(S);const tt=Oe().order(pn).offset(dl),st=(s?tt.keys(P)(k):Oe().keys(P)(k)).map(T=>{const p=T.key,$=T.map(_=>{const et=_.data.label;return{..._,key:`${p} - ${et}`,barKey:p}});return $.key=p,$});function H(T){if(T.barKey===a)return"none";const p=I.bandwidth(),$=nt(T[0])-nt(T[1]),_=isNaN($)||$<0?0:$;return P.indexOf(T.barKey??"")===P.length-1||T.barKey===m?`${p+_} ${p} ${_}`:`${_} ${p}`}function Y(T){const p=I.bandwidth();return P.indexOf(T.barKey??"")===P.length-1||T.barKey===m?0:p*-1}const F=T=>a!==""&&a===T.barKey?`rect ${K.rectLegendHovered}`:`rect ${K.rect}`;let q=g.selectAll(".serie").data(st,function(T){return T.key}).join(T=>T.append("g").attr("class","serie").attr("fill",function($){const _=U.current.findIndex(et=>et===$.key);return ct(_)}).style("opacity",1).style("pointer-events","auto"),T=>T.transition().duration(E).attr("fill",function($){const _=U.current.findIndex(et=>et===$.key);return ct(_)}).style("opacity",1).style("pointer-events","auto"),T=>T.transition().duration(E).style("opacity",0).attr("fill","grey").selectAll("rect").attr("y",L).attr("height",0).remove().remove());q.selectAll("rect").data(T=>T,T=>T.data.label).join(T=>{let p;return p=T.append("rect").attr("class",F).attr("x",function($){return I($.data.label+"")??0}).attr("width",I.bandwidth()).attr("y",function($){if(!it.includes($.data.label+""))return L-y.bottom;const _=nt($[1]),et=nt($[0])-nt($[1]),ut=isNaN(et)||et<0?0:et;return _+ut}).attr("height",0).attr("stroke-dasharray",H).attr("stroke-dashoffset",Y).transition().duration(E).attr("x",function($){return I($.data.label+"")??0}).attr("width",function($){return I.bandwidth()}).attr("height",function($){const _=nt($[0])-nt($[1]);return isNaN(_)||_<0?0:_}).attr("y",function($){return nt($[1])}),p},void 0,T=>T.transition().duration(E).attr("opacity",0).attr("height",0).attr("y",L).remove()).attr("class",F).attr("stroke-dasharray",H).attr("stroke-dashoffset",Y).transition().duration(E).attr("x",function(T){return I(T.data.label+"")??0}).attr("width",function(T){return I.bandwidth()}).attr("height",T=>{const p=nt(T[0])-nt(T[1]);return isNaN(p)||p<0?0:p}).attr("y",T=>nt(T[1])),q.selectAll("rect").on("mouseover",function(T,p){mt(".x-axis").selectAll("text").filter(Dt=>Dt===p.data.name).attr("class",W+" "+Z.hoveredAxisText),D.style("opacity",1).select("p.title").text(p.data.label);const $=p.data[p.barKey]||0,_=p.data.total||0,et=$/_*100,ut=Vt(".1f")(et)+"%";D.select("p.top-label").text(p.barKey+" : "+(s?ut:Tt($))),D.select("p.bottom-label").text(s?`(${Tt($)} of ${Tt(_)})`:`Total : ${Tt(_)}`)}).on("touch",function(T,p){mt(".x-axis").selectAll("text").filter($=>$===p.data.label).attr("class",W)}).on("mousemove",(T,p)=>{xn(D,{e:T,svg:at,yScale:nt})}).on("mouseout",function(T,p){mt(".x-axis").selectAll("text").filter($=>$===p.data.name).attr("class",W),D.style("opacity",0)})},[...A,M,C,P,s,a,l]);return j.jsxs("div",{ref:e,style:{width:r,height:i,display:"flex",flexDirection:"column"},children:[R?fe.createPortal(V,R):V,j.jsxs("div",{ref:v,className:`${Z["fill-container"]}`,style:{display:"flex",flexDirection:"column"},children:[j.jsx("svg",{className:`${Z["chart-svg"]} ${Z["fill-container"]}`,viewBox:`0 0 ${r} ${x}`,children:j.jsxs("g",{className:"plot-area",children:[j.jsx("g",{className:"plot-rects"}),j.jsx("g",{className:"y-axis"}),j.jsx("g",{className:"x-axis"})]})}),j.jsx(yn,{pCount:3})]})]})}pt.BarChart=pl,pt.Button=zr,pt.GroupedBarChart=xl,pt.PercentageBarChart=vl,pt.PieChart=yl,pt.StackedBarChart=ml,Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"})}));
